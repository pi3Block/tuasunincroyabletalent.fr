# ===========================================
# Tu as un incroyable talent ? - Environment Variables
# ===========================================
# Copy this file to .env and fill in your values
#
# For Coolify production: set these in Coolify Dashboard → Environment Variables
# For local dev: copy to .env in project root

# ===========================================
# SHARED INFRASTRUCTURE (Coolify)
# ===========================================
# Copy these from augmenter.pro app in Coolify
AUGMENTER_DB_PASSWORD=
AUGMENTER_REDIS_PASSWORD=

# Database (shared-postgres, voicejury_db)
# Default uses shared infrastructure with UUID suffix
# Override if Coolify container UUID changes after redeploy
DATABASE_URL=postgresql://augmenter:${AUGMENTER_DB_PASSWORD}@shared-postgres:5432/voicejury_db

# Redis (shared-redis, DB index 2)
REDIS_URL=redis://:${AUGMENTER_REDIS_PASSWORD}@shared-redis:6379/2

# ===========================================
# LLM — Jury Comment Generation
# ===========================================
# LiteLLM Proxy (Groq qwen3-32b, gratuit — Tier 1)
LITELLM_HOST=http://host.docker.internal:4000
LITELLM_API_KEY=
LITELLM_JURY_MODEL=jury-comment

# Ollama Light (qwen3:4b, GPU 0 — Tier 2 fallback)
OLLAMA_HOST=http://host.docker.internal:11435

# Groq API key (fallback direct pour Whisper et LLM)
GROQ_API_KEY=

# ===========================================
# WHISPER — Speech-to-Text
# ===========================================
# Shared Whisper HTTP (GPU 4, Faster Whisper — Tier 1)
SHARED_WHISPER_URL=http://shared-whisper:9000
SHARED_WHISPER_TIMEOUT=120

# Karaoke alignment engine routing and quality gates (P0)
KARAOKE_ALIGNMENT_ENGINE=auto
KARAOKE_ALIGNMENT_LICENSE_MODE=non_commercial
KARAOKE_ALIGNMENT_ENGINE_VERSION=v2-p0
CTC_ALIGN_DEVICE=cuda:1
KARAOKE_REGROUP_TOLERANCE_MS=500
KARAOKE_SYNCED_REGROUP_MAX_SKIPPED_RATIO=0.20
KARAOKE_CTC_MIN_CONFIDENCE_AVG=0.45
KARAOKE_CTC_LOW_CONF_THRESHOLD=0.30
KARAOKE_CTC_MAX_LOW_CONF_RATIO=0.35

# Local Whisper fallback (Tier 3, disabled in prod — uses worker GPU)
WHISPER_LOCAL_FALLBACK=false
WHISPER_MODEL=turbo

# ===========================================
# LANGFUSE — LLM Tracing & Observability
# ===========================================
# Copy from augmenter.pro (same Langfuse instance)
LANGFUSE_PUBLIC_KEY=
LANGFUSE_SECRET_KEY=
LANGFUSE_BASE_URL=http://langfuse:3000

# ===========================================
# SPOTIFY — Track Search & Metadata
# ===========================================
# Get from https://developer.spotify.com/dashboard
SPOTIFY_CLIENT_ID=
SPOTIFY_CLIENT_SECRET=

# ===========================================
# GENIUS — Lyrics Fetching
# ===========================================
# Get from https://genius.com/api-clients
GENIUS_API_TOKEN=
GENIUS_API_CLIENT_ACCESS_TOKEN=

# ===========================================
# APPLICATION
# ===========================================
SECRET_KEY=change-this-to-a-random-string-in-production
DEBUG=true

# Audio processing
AUDIO_OUTPUT_DIR=/app/audio_files
MAX_AUDIO_DURATION=300

# GPU (worker only)
CUDA_VISIBLE_DEVICES=0

# ===========================================
# FRONTEND (build-time only)
# ===========================================
VITE_API_URL=https://api.tuasunincroyabletalent.fr
