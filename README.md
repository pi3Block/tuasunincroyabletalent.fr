# The AI Voice Jury - Karaoke AI Singing Evaluation Platform

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.11](https://img.shields.io/badge/Python-3.11-blue.svg)](https://www.python.org/downloads/)
[![React 18](https://img.shields.io/badge/React-18-61dafb.svg)](https://reactjs.org/)
[![Docker](https://img.shields.io/badge/Docker-Compose-2496ed.svg)](https://docs.docker.com/compose/)
[![CUDA](https://img.shields.io/badge/CUDA-GPU%20Accelerated-76b900.svg)](https://developer.nvidia.com/cuda-zone)

> **AI-powered karaoke singing evaluation platform** with real-time pitch detection, lyrics synchronization, and personalized feedback from AI jury personas - like "Got Talent" TV shows!

ğŸ¤ **Live Demo**: [tuasunincroyabletalent.fr](https://tuasunincroyabletalent.fr)

---

## Table of Contents

- [Features](#-features)
- [How It Works](#-how-it-works)
- [Tech Stack](#-tech-stack)
- [Quick Start](#-quick-start)
- [Architecture](#-architecture)
- [API Reference](#-api-reference)
- [Configuration](#-configuration)
- [Performance](#-performance)
- [Contributing](#-contributing)
- [License](#-license)

---

## ğŸŒŸ Features

### Core Features
- **Spotify Integration** - Search and select any song from Spotify's catalog
- **YouTube Auto-Match** - Automatically finds the matching YouTube video for karaoke playback
- **Real-time Lyrics Sync** - Synchronized lyrics display with adjustable offset (Â±5 minutes)
- **AI Voice Separation** - Demucs-powered vocal isolation for accurate comparison
- **Pitch Detection** - CREPE neural network for precise pitch analysis
- **Speech Recognition** - Whisper transcription for lyrics accuracy scoring

### AI Jury System
- **3 Unique Personas** - Harsh critic, Encouraging coach, Technical expert
- **Personalized Feedback** - Natural language comments generated by Ollama LLM
- **Scoring System** - Pitch accuracy, rhythm, and lyrics combined scoring

### User Experience
- **Mobile-First Design** - Optimized for smartphones
- **Karaoke Mode** - Word-by-word highlight (Apple Music style)
- **Tap-to-Sync** - Click any lyric line to sync with playback
- **Auto-Scroll** - Smart scroll that detects user interaction

---

## ğŸ¯ How It Works

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    THE AI VOICE JURY PIPELINE                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. SETUP                    2. PERFORM                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ Select Song â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Sing Along  â”‚                    â”‚
â”‚  â”‚  (Spotify)  â”‚             â”‚  (Record)   â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚         â”‚                           â”‚                           â”‚
â”‚         â–¼                           â–¼                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ YouTube     â”‚             â”‚ WebSocket   â”‚                    â”‚
â”‚  â”‚ Auto-Match  â”‚             â”‚ Streaming   â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚         â”‚                           â”‚                           â”‚
â”‚         â–¼                           â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚                           â”‚
â”‚  â”‚ Demucs      â”‚                    â”‚                           â”‚
â”‚  â”‚ Separation  â”‚                    â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                    â”‚                           â”‚
â”‚         â”‚                           â”‚                           â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                     â–¼                                           â”‚
â”‚              3. ANALYZE                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚               â”‚
â”‚  â”‚  â”‚  CREPE  â”‚  â”‚ Whisper â”‚  â”‚ Librosa â”‚       â”‚               â”‚
â”‚  â”‚  â”‚  Pitch  â”‚  â”‚  Text   â”‚  â”‚ Rhythm  â”‚       â”‚               â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â”‚               â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚               â”‚
â”‚  â”‚                   â–¼                          â”‚               â”‚
â”‚  â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚               â”‚
â”‚  â”‚            â”‚   SCORING   â”‚                   â”‚               â”‚
â”‚  â”‚            â”‚ Pitch: 40%  â”‚                   â”‚               â”‚
â”‚  â”‚            â”‚ Rhythm: 30% â”‚                   â”‚               â”‚
â”‚  â”‚            â”‚ Lyrics: 30% â”‚                   â”‚               â”‚
â”‚  â”‚            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                   â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                      â–¼                                          â”‚
â”‚               4. AI JURY                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚               â”‚
â”‚  â”‚  â”‚  Harsh  â”‚  â”‚ Support â”‚  â”‚Technicalâ”‚       â”‚               â”‚
â”‚  â”‚  â”‚  Critic â”‚  â”‚  Coach  â”‚  â”‚ Expert  â”‚       â”‚               â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚               â”‚
â”‚  â”‚         â–¼           â–¼           â–¼            â”‚               â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚               â”‚
â”‚  â”‚  â”‚     Ollama LLM (Llama 3.2)           â”‚    â”‚               â”‚
â”‚  â”‚  â”‚     Personalized Feedback            â”‚    â”‚               â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ›  Tech Stack

### Frontend
| Technology | Purpose |
|------------|---------|
| **React 18** | UI Framework |
| **TypeScript** | Type Safety |
| **Vite 6** | Build Tool & Dev Server |
| **Zustand 5** | State Management |
| **Tailwind CSS 3** | Styling |
| **Radix UI** | Accessible Components |
| **Lucide Icons** | Icon Library |

### Backend
| Technology | Purpose |
|------------|---------|
| **FastAPI** | REST API Framework |
| **Python 3.11** | Runtime |
| **SQLAlchemy 2** | ORM |
| **PostgreSQL 16** | Database |
| **Redis 7** | Cache & Task Queue |
| **Celery 5** | Background Tasks |

### AI/ML (GPU-Accelerated)
| Technology | Purpose |
|------------|---------|
| **Demucs (htdemucs)** | Vocal/Instrumental Separation |
| **CREPE** | Neural Pitch Detection |
| **Whisper (turbo)** | Speech-to-Text |
| **Ollama (Llama 3.2)** | LLM for Jury Comments |
| **PyTorch + CUDA** | GPU Acceleration |

### Infrastructure
| Technology | Purpose |
|------------|---------|
| **Docker Compose** | Container Orchestration |
| **NVIDIA CUDA** | GPU Computing |
| **Coolify** | Self-hosted PaaS |
| **Traefik** | Reverse Proxy & TLS |

---

## ğŸš€ Quick Start

### Prerequisites

- Docker & Docker Compose
- NVIDIA GPU with CUDA support
- Spotify Developer Account
- 16GB+ RAM recommended

### Installation

```bash
# Clone the repository
git clone https://github.com/yourusername/tuasunincroyabletalent.fr.git
cd tuasunincroyabletalent.fr

# Copy environment file
cp .env.example .env

# Edit .env with your credentials
nano .env

# Start all services
docker-compose up -d

# Check logs
docker-compose logs -f api worker

# Access the app
open http://localhost:3000
```

### Development Mode

```bash
# Frontend (hot reload)
cd frontend && npm install && npm run dev

# Backend (auto-reload)
cd backend && pip install -r requirements.txt
uvicorn app.main:app --reload --port 8000

# Worker (Celery)
cd worker && celery -A tasks.celery_app worker --loglevel=info
```

---

## ğŸ— Architecture

```
tuasunincroyabletalent.fr/
â”œâ”€â”€ frontend/                    # React + Vite
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ lyrics/          # Professional lyrics display
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LyricsDisplayPro.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LyricLine.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ KaraokeWord.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ LyricsControls.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ui/              # Radix UI components
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ useLyricsSync.ts # O(log n) binary search
â”‚   â”‚   â”‚   â””â”€â”€ useLyricsScroll.ts
â”‚   â”‚   â”œâ”€â”€ stores/              # Zustand stores
â”‚   â”‚   â”œâ”€â”€ api/                 # API client
â”‚   â”‚   â””â”€â”€ types/               # TypeScript definitions
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ backend/                     # FastAPI
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py              # App entrypoint
â”‚   â”‚   â”œâ”€â”€ routers/             # API routes
â”‚   â”‚   â”‚   â”œâ”€â”€ session.py       # Session management
â”‚   â”‚   â”‚   â””â”€â”€ search.py        # Spotify search
â”‚   â”‚   â”œâ”€â”€ services/            # Business logic
â”‚   â”‚   â”‚   â”œâ”€â”€ spotify.py
â”‚   â”‚   â”‚   â”œâ”€â”€ youtube.py
â”‚   â”‚   â”‚   â”œâ”€â”€ lyrics.py
â”‚   â”‚   â”‚   â””â”€â”€ auto_sync.py
â”‚   â”‚   â””â”€â”€ models/              # SQLAlchemy models
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ worker/                      # Celery (GPU tasks)
â”‚   â”œâ”€â”€ tasks/
â”‚   â”‚   â”œâ”€â”€ audio_separation.py  # Demucs
â”‚   â”‚   â”œâ”€â”€ pitch_analysis.py    # CREPE
â”‚   â”‚   â”œâ”€â”€ transcription.py     # Whisper
â”‚   â”‚   â””â”€â”€ scoring.py           # Ollama jury
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ docker-compose.yml           # All services
â”œâ”€â”€ CLAUDE.md                    # AI assistant instructions
â””â”€â”€ README.md                    # This file
```

---

## ğŸ“¡ API Reference

### Session Management

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/session/start` | POST | Create new session with Spotify track |
| `/api/session/{id}/status` | GET | Get session status & progress |
| `/api/session/fallback-source` | POST | Set manual YouTube URL |
| `/api/session/{id}/lyrics` | GET | Get synchronized lyrics |
| `/api/session/{id}/lyrics-offset` | GET/POST | Get/Set lyrics offset |
| `/api/session/{id}/auto-sync` | POST | Auto-detect lyrics offset |

### Search

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/search/spotify` | GET | Search Spotify catalog |
| `/api/search/recent` | GET | Get recent track history |

### Results

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/results/{sessionId}` | GET | Get analysis results & jury comments |

### WebSocket

| Endpoint | Description |
|----------|-------------|
| `/stream/audio` | Real-time audio streaming |

---

## âš™ï¸ Configuration

### Environment Variables

```env
# Database
DATABASE_URL=postgresql://voicejury:password@postgres:5432/voicejury

# Cache
REDIS_URL=redis://redis:6379/0

# Spotify API
SPOTIFY_CLIENT_ID=your_client_id
SPOTIFY_CLIENT_SECRET=your_client_secret
SPOTIFY_SP_DC=optional_for_synced_lyrics

# Genius API (Lyrics)
GENIUS_API_CLIENT_ACCESS_TOKEN=your_token

# Ollama LLM
OLLAMA_HOST=http://ollama:11434

# Security
SECRET_KEY=your_secret_key

# Audio Processing
WHISPER_MODEL=turbo
MAX_AUDIO_DURATION=300
```

---

## âš¡ Performance

### Benchmarks (NVIDIA RTX 3080)

| Operation | Duration | Notes |
|-----------|----------|-------|
| API Response | <200ms | Async I/O |
| Demucs Separation | ~25s | 3min song |
| Whisper Transcription | ~8s | 3min, turbo model |
| CREPE Pitch Analysis | ~4s | 3min, medium |
| Ollama Jury Comments | ~5s | 3 personas |
| **Total Analysis** | **<60s** | End-to-end |

### Optimizations

- **Binary Search** for lyrics sync (O(log n) instead of O(n))
- **Virtualization** - Only renders visible lyric lines
- **GPU Lazy Loading** - Models loaded on first use
- **Redis Caching** - 7-day TTL for lyrics and YouTube matches
- **Debounced Scroll** - Prevents animation jank

---

## ğŸ¨ Features Showcase

### Karaoke Mode (Word-by-Word)
```tsx
import { LyricsDisplayPro } from '@/components/lyrics'

<LyricsDisplayPro
  lyrics={plainText}
  syncedLines={syncedLines}
  currentTime={playbackTime}
  isPlaying={isPlaying}
  displayMode="karaoke"  // Word-by-word highlight
  offset={offset}
  onOffsetChange={setOffset}
/>
```

### Sync Controls
- **Auto-Sync**: AI-powered offset detection using Whisper
- **Tap-to-Sync**: Click any line to sync
- **Quick Adjust**: Â±5s, Â±30s buttons
- **Fine Adjust**: Â±0.5s precision

---

## ğŸ¤ Contributing

Contributions are welcome! Please read our contributing guidelines before submitting PRs.

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

---

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---

## ğŸ™ Acknowledgments

- [Demucs](https://github.com/facebookresearch/demucs) by Meta AI
- [CREPE](https://github.com/marl/crepe) by NYU MARL
- [Whisper](https://github.com/openai/whisper) by OpenAI
- [Ollama](https://ollama.ai/) for local LLM inference
- [Spotify Web API](https://developer.spotify.com/documentation/web-api/)

---

<p align="center">
  Made with â¤ï¸ for aspiring singers everywhere
  <br>
  <a href="https://tuasunincroyabletalent.fr">tuasunincroyabletalent.fr</a>
</p>

---

## ğŸ” SEO Keywords

**Tags**: karaoke app, AI singing evaluation, vocal analysis, pitch detection, lyrics synchronization, Spotify karaoke, YouTube karaoke, voice jury, singing feedback, React karaoke, Python audio processing, Demucs vocal separation, Whisper speech recognition, CREPE pitch tracking, Ollama LLM, got talent app, singing competition app, karaoke scoring, voice assessment AI
